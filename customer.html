<!doctype html>

<head>
    <title>Demo chat with socket.io</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.0/socket.io.js"></script>
</head>

<body>
    <div>
        <h1>Connect to hotel</h1>
        <input id="hotel-id" placeholder="hotel-id" />
        <button id="join">Join</button>
    </div>

    <div id="main">
        <h1>Demo Socket IO</h1>
        <input id="message" placeholder="message" />
        <button id="send"> Send </button>
    </div>

    <script>
        // Socket connect to server
        const socket = io("", { transports: ['websocket'] });
        const Token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjp7InVzZXJfaWQiOjYsInJvbGUiOiJvd25lciIsIkV4cGlyeSI6MH0sImV4cCI6MTcxNjk3MDE1NCwiaWF0IjoxNzE0Mzc4MTU0fQ.6TK14vH4Srs8waONZcvXu3fx-Ib9V9W-xfJuC8QJNlM";
        socket.on('connect', () => {
            console.log('Client connected');
            socket.emit('authenticate', Token);
        })
        socket.on('disconnect', () => console.log('Socket is disconnected'))
        // Socket connect to server


        // Join room
        const joinButton = document.querySelector('#join')
        joinButton.addEventListener('click', () => {
            const hotel = document.getElementById('hotel-id').value;
            console.log(hotel)
            socket.emit('join', hotel );
        });
        // Join room




        // Send message
        const sendButton = document.querySelector('#send');
        sendButton.addEventListener('click', () => {
            const message = document.getElementById('message').value;
            console.log(message)
            socket.emit('chat', { message });
        });
        // Send message

    </script>
</body>

